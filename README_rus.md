# Speech2Cursor

Проект для записи голоса с микрофона и его транскрибации в текст через OpenAI API.

## Структура проекта

- `audio_handler.py` - модуль для асинхронной транскрибации голосовых сообщений
- `config.py` - конфигурация проекта (логирование, переменные окружения)
- `mic_transcribe.py` - основной скрипт для записи с микрофона и транскрибации
- `mic_transcribe_hotkey.py` - скрипт с управлением горячими клавишами (нажмите Alt+S для записи)
- `requirements.txt` - зависимости проекта
- `.env` - переменные окружения (API ключи, настройки)
- `.env.example` - пример файла переменных окружения

## Системные требования

- **Python 3.11** или выше
- Активное подключение к интернету
- Микрофон для записи голоса

## Установка

1. Убедитесь, что у вас установлен Python 3.11 или выше. Проверить версию можно командой:
   ```bash
   python --version
   ```

2. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Evgen-rus/Speech2Cursor.git
   cd Speech2Cursor
   ```

3. Создайте виртуальное окружение:
   ```bash
   python -m venv venv
   ```

4. Активируйте окружение:
   - Windows: `venv\Scripts\activate`
   - Linux/Mac: `source venv/bin/activate`

5. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

6. Настройте `.env` файл:
   ```bash
   cp .env.example .env
   ```
   Откройте `.env` и замените `OPENAI_API_KEY=Ваш API ключ OpenAI` на ваш реальный API ключ OpenAI.

## Использование

### Вариант 1: Стандартный режим
Запустите скрипт:
```bash
python mic_transcribe.py
```

Управление записью:
- Нажмите Enter для начала записи
- Говорите в микрофон
- Нажмите Enter для остановки записи
- Текст автоматически копируется в буфер обмена и готов к вставке в чат с Ctrl+V

### Вариант 2: Режим горячих клавиш

#### Способ 2.1: Запуск через командную строку
Запустите скрипт с управлением горячими клавишами:
```bash
python mic_transcribe_hotkey.py
```

#### Способ 2.2: Запуск через .bat файл (Windows)
Для удобного запуска на Windows можно использовать .bat файл:

1. Создайте файл `run_speech2cursor.bat` в корне проекта со следующим содержимым:
   ```batch
   @echo off
   echo Активация виртуального окружения...
   call venv\Scripts\activate.bat

   if %errorlevel% neq 0 (
       echo Ошибка активации виртуального окружения!
       pause
       exit /b 1
   )

   echo Запуск Speech2Cursor...
   python mic_transcribe_hotkey.py

   echo.
   echo Программа завершена.
   pause
   ```

2. Дважды кликните по файлу `run_speech2cursor.bat` для запуска

#### Способ 2.3: Ярлык на рабочий стол
Создайте ярлык со следующим расположением объекта:
```
[ПУТЬ_К_ПРОЕКТУ]\venv\Scripts\python.exe [ПУТЬ_К_ПРОЕКТУ]\mic_transcribe_hotkey.py
```

Где `[ПУТЬ_К_ПРОЕКТУ]` - полный путь к папке вашего проекта Speech2Cursor.

**Пример для вашего пути:**
```
C:\My_Scripts_PYTON\Speech2Cursor\venv\Scripts\python.exe C:\My_Scripts_PYTON\Speech2Cursor\mic_transcribe_hotkey.py
```

Управление горячими клавишами:
- Нажмите Alt+S для начала записи
- Нажмите Alt+S еще раз для остановки записи и начала транскрибации
- Текст автоматически копируется в буфер обмена
- Нажмите Ctrl+C для выхода

## Ограничения

Проект изначально создан для удобной работы в курсоре — короткие голосовые сообщения для быстрой транскрибации.

- Максимальная длина записи: ~12-13 минут (ограничение API ~25 МБ)
- Рекомендуемая длина: 1-5 минут для оптимальной скорости
- Требуется активное подключение к интернету для транскрибации
- Формат записи: WAV (16 kHz, 16-bit, моно)

## Зависимости

- `openai` - API для транскрибации
- `sounddevice` - запись с микрофона
- `soundfile` - работа с аудио-файлами
- `numpy` - обработка аудио-данных
- `pyperclip` - копирование в буфер обмена
- `keyboard` - отслеживание горячих клавиш
- `python-dotenv` - загрузка переменных окружения
